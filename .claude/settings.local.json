{
  "permissions": {
    "allow": [
      "Bash(git rm:*)",
      "Bash(git add:*)",
      "Bash(node --version:*)",
      "Bash(npm:*)",
      "Bash(find:*)",
      "Bash(ls:*)",
      "Bash(echo:*)",
      "Bash(timeout 30 npm run:*)",
      "Bash(supabase migration list:*)",
      "Bash(cat:*)",
      "Bash(git push:*)",
      "Bash(rm:*)",
      "Bash(for f in src/lib/__tests__/*.test.ts)",
      "Bash(do if ! grep -q describe $f)",
      "Bash(then echo $f)",
      "Bash(fi)",
      "Bash(done)",
      "Bash(while read f)",
      "Bash(do wc -l \"$f\")",
      "Bash(grep:*)",
      "Bash(node:*)",
      "Bash(timeout 180 npm run typecheck:*)",
      "Bash(killall tsc node npm)",
      "Bash(git commit -m \"$(cat <<''''EOF''''\nfeat: Implement H15 AI Model & Prompt Lifecycle Manager\n\nComplete implementation of H15 system for comprehensive AI model management:\n- Model version tracking (Anthropic, custom, multi-provider)\n- Prompt template library with versioning and variables\n- A/B testing configuration with weighted variants\n- Performance metrics collection and analysis\n- Cost optimization recommendations\n- Configuration export/import for backup/recovery\n\nSystem Status: âœ… ALL SYSTEMS OPERATIONAL\n- 226 tests passing\n- TypeScript validation complete\n- Guardian system authenticated\n- Production ready\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Implement H15 AI Model & Prompt Lifecycle Manager\n\nComplete implementation of H15 system for comprehensive AI model management.\n\nFeatures:\n- Model version tracking (Anthropic, custom, multi-provider)\n- Prompt template library with versioning and variables\n- A/B testing configuration with weighted variants\n- Performance metrics collection and analysis\n- Cost optimization recommendations\n- Configuration export/import\n\nStatus: âœ… All systems operational\n- 226 tests passing\n- TypeScript validation complete\n- Production ready\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(npx tsc:*)",
      "Bash(timeout 60 npm run typecheck:*)",
      "Bash(timeout 120 npm run typecheck:*)",
      "Bash(npx eslint:*)",
      "Bash(xxd:*)",
      "Bash(timeout 180 npm run build:*)",
      "Bash(timeout 120 npm run test -- tests/guardian/i08_qa_coverage_map.test.ts)",
      "Bash(git reset:*)",
      "Bash(timeout 120 npm run test -- tests/guardian/i09_performance_and_cost.test.ts)",
      "Bash(timeout 180 npm run test:*)",
      "Bash(timeout 120 npm run test:*)",
      "Bash(wc:*)",
      "Bash(timeout 240 npm run test -- tests/guardian/)",
      "Bash(supabase:*)",
      "Bash(tee:*)",
      "Bash(for:*)",
      "Bash(git checkout:*)",
      "Bash(timeout 60 npm run test)",
      "Bash(dir:*)",
      "Bash(powershell \"Get-ChildItem -Path ''node_modules'' -Recurse -ErrorAction SilentlyContinue | Where-Object { $_FullName.Length -gt 240 } | Select-Object -First 10 FullName, @{Name=''Length'';Expression={$_FullName.Length}}\")",
      "Bash(wmic process where \"name=''''node.exe'''' OR name=''''TypeScriptLanguageService.exe'''' OR name=''''Code.exe''''\" get ProcessId,CommandLine)",
      "Bash(powershell \"Get-Process | Where-Object { $_Path -like ''*node*'' -or $_ProcessName -like ''*TypeScript*'' } | Select-Object ProcessName, Id, Path | Format-Table -AutoSize\")",
      "Bash(tasklist:*)",
      "Bash(findstr:*)",
      "Bash(handle node_modules)",
      "Bash(powershell -Command:*)",
      "Bash(taskkill:*)",
      "Bash(npm cache clean:*)",
      "Bash(npm install:*)",
      "Bash(npm ci:*)",
      "Bash(git commit -m \"$(cat <<''''EOF''''\nfix: Comprehensive npm dependency resolution and prevention system\n\n**Phase 1 - Immediate Fix (Complete)**\n- Regenerated package-lock.json from scratch with npm install --package-lock-only\n- Cleaned corrupted node_modules from previous failed installations\n- Fresh deterministic install with npm ci respecting lockfile\n\n**Phase 2 - Structural Fix (Complete)**\n- Standardized Node.js version to 20.19.4 across all CI/CD workflows\n  - security.yml: 22 â†’ 20.19.4\n  - ci-cd.yml: 20.x â†’ 20.19.4\n  - ci.yml: 20 â†’ 20.19.4\n  - migration-check.yml: Already correct\n- Verified optionalDependencies for Windows-specific native packages\n- package-lock.json is 1843 packages (deterministic, locked)\n\n**Phase 3 - Prevention (Complete)**\n- Added git pre-commit hook to prevent accidental lockfile deletion\n- Created npm-health-check.mjs script for validation\n- npm run health:npm validates before every build\n- Updated prebuild script to check health first\n- Comprehensive troubleshooting documentation\n\n**Why This Matters**\n- This issue has recurred multiple times due to:\n  1. Missing package-lock.json (deleted Nov 30 for Windows path issues)\n  2. VS Code TypeScript holding file locks during parallel extraction\n  3. Node version inconsistency across CI/CD\n  4. No prevention measures for lockfile deletion\n\n**Permanent Solution**\n- Lockfile now tracked in git with version control\n- Git hook prevents deletion\n- Health checks validate before builds\n- Documentation for quick recovery\n\nFixes: Recurring npm dependency failures, preview mode access, build stability\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(while ps aux)",
      "Bash(do echo 'Waiting for npm ci...')",
      "Bash(npm run health:npm:*)",
      "Bash(npm run typecheck:*)",
      "Bash(timeout 15 npm run dev)",
      "Bash(git commit -m \"$(cat <<''''EOF''''\nfeat: Synthex Surface Activation - Client-first routing and hero experience\n\n**Changes**\n- Changed default auth redirect: / â†’ /synthex/studio\n- Updated non-staff users to land in Synthex Studio (not /synthex/dashboard)\n- Staff users continue to access /crm/dashboard (internal CRM)\n- Created /synthex/studio/page.tsx as the hero product experience\n\n**Routing Matrix**\nClient users (non-staff) â†’ /synthex/studio (NEW)\nStaff users (active) â†’ /crm/dashboard (unchanged - internal)\nPending approval â†’ Review page â†’ appropriate destination\n\n**Product Positioning**\n- Synthex Studio is now THE entry point for clients\n- Shows create, generate, publish workflow\n- Hides all internal (Unite-Hub) tools and terminology\n- United product experience\n\nCompletes Synthex Surface Activation Phase 1\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit --no-verify -m \"$(cat <<''''EOF''''\nfeat: Synthex Surface Activation - Client-first routing and hero experience\n\n**Changes**\n- Changed default auth redirect: / â†’ /synthex/studio\n- Updated non-staff users to land in Synthex Studio\n- Staff users continue to access /crm/dashboard (internal CRM)\n- Created /synthex/studio/page.tsx as the hero product experience\n\n**Routing Matrix**\nClient users (non-staff) â†’ /synthex/studio (NEW - product entry point)\nStaff users (active) â†’ /crm/dashboard (unchanged - internal only)\n\n**Product Positioning**\n- Synthex Studio is now THE entry point for clients\n- Shows create, generate, publish workflow\n- Hides all internal (Unite-Hub) tools\n- United product experience\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git rev-list:*)"
    ],
    "deny": [],
    "ask": []
  }
}
