# Active Upstream Configuration
# Generated: 2025-12-02
# Purpose: Defines which environment (blue or green) receives production traffic
# This file is dynamically updated by deployment scripts

# Current active environment: BLUE
upstream active-app {
    server app-blue:3008 max_fails=3 fail_timeout=30s;
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
}

# To switch to green environment, replace above with:
# upstream active-app {
#     server app-green:3008 max_fails=3 fail_timeout=30s;
#     keepalive 32;
#     keepalive_requests 100;
#     keepalive_timeout 60s;
# }

# After updating this file, reload nginx with:
# docker-compose -f docker-compose.blue-green.yml exec nginx nginx-reload.sh
