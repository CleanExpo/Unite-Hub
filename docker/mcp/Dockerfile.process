# Process MCP Server
# Executes bash commands, manages long-running processes
FROM node:22-bookworm

WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    curl \
    jq \
    git \
    && rm -rf /var/lib/apt/lists/*

# Install MCP SDK and dependencies
RUN npm init -y && \
    npm install @modelcontextprotocol/sdk@latest \
                execa tree-kill pidtree \
                express cors body-parser --save

# Copy server implementation
COPY docker/mcp/servers/process-server.mjs ./server.mjs

# Health check port
EXPOSE 3101

# Run server
CMD ["node", "server.mjs"]
