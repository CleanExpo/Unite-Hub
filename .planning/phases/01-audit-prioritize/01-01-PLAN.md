---
phase: 01-audit-prioritize
type: execute
---

<objective>
Audit all design token violations and create prioritized migration plan.

Purpose: Understand scope of migration work, identify high-impact files, establish baseline metrics.
Output: Violation report (by file/category), prioritized migration list, baseline snapshot.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@tests/design-tokens/token-usage.test.ts
@src/app/globals.css
@.claude/skills/design-token-validator.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run design token tests and capture detailed violations</name>
  <files>tests/design-tokens/token-usage.test.ts</files>
  <action>Run `npm test tests/design-tokens/token-usage.test.ts` to get current violation counts. Then modify the test temporarily to output ALL violations with file paths and line numbers (not just counts). Capture output to `.planning/phases/01-audit-prioritize/VIOLATIONS-RAW.md`. Reset test file after capturing data.</action>
  <verify>VIOLATIONS-RAW.md exists with complete list of violations per file</verify>
  <done>Raw violation data captured with file paths and specific color classes found</done>
</task>

<task type="auto">
  <name>Task 2: Categorize violations and generate audit report</name>
  <files>.planning/phases/01-audit-prioritize/AUDIT-REPORT.md</files>
  <action>Analyze VIOLATIONS-RAW.md and create AUDIT-REPORT.md with:
    1. **Summary Stats**: Total violations, UI components vs pages breakdown
    2. **By Category**: Group by violation type (gray-*, red-*, blue-*, green-*, amber-*)
    3. **By File**: List each file with violation count, sorted by count desc
    4. **High-Impact Files**: Files with >10 violations (migrate first for max impact)
    5. **Token Mapping Reference**: Copy from test file for migration guidance
  </action>
  <verify>AUDIT-REPORT.md contains categorized breakdown and high-impact file list</verify>
  <done>Audit report complete with categorized violations and token mapping reference</done>
</task>

<task type="auto">
  <name>Task 3: Create prioritized migration plan</name>
  <files>.planning/phases/01-audit-prioritize/MIGRATION-PRIORITY.md</files>
  <action>Create MIGRATION-PRIORITY.md with prioritized migration order:
    1. **Priority 1 (Phase 2)**: UI Components (25 violations) - Foundation for all pages
    2. **Priority 2 (Phase 3)**: Dashboard pages - Most used by clients
    3. **Priority 3 (Phase 4)**: CRM pages (contacts, campaigns, emails)
    4. **Priority 4 (Phase 5)**: Product pages (Synthex, Founder OS)

    For each priority level, list specific files in order of violation count (highest first).
    Include estimated effort (files Ã— avg violations) per phase.
  </action>
  <verify>MIGRATION-PRIORITY.md contains ordered file list with effort estimates</verify>
  <done>Migration priority document complete with specific file order per phase</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] VIOLATIONS-RAW.md exists with all violation data
- [ ] AUDIT-REPORT.md has categorized breakdown
- [ ] MIGRATION-PRIORITY.md has ordered migration plan
- [ ] All documents reference current baseline (25 UI + 401 page = 426 total)
</verification>

<success_criteria>
- All tasks completed
- Raw violation data captured
- Violations categorized by type and file
- Migration priority established for Phases 2-5
- High-impact files identified for each phase
</success_criteria>

<output>
After completion, create `.planning/phases/01-audit-prioritize/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Audit & Prioritize Summary

**[Substantive one-liner]**

## Accomplishments
- [Key outcome 1]
- [Key outcome 2]

## Files Created
- `.planning/phases/01-audit-prioritize/VIOLATIONS-RAW.md`
- `.planning/phases/01-audit-prioritize/AUDIT-REPORT.md`
- `.planning/phases/01-audit-prioritize/MIGRATION-PRIORITY.md`

## Key Findings
- [Top violation categories]
- [Highest-impact files]

## Next Step
Phase 1 complete, ready for Phase 2: UI Components
</output>
