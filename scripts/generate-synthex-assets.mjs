/**
 * Generate Synthex-Branded Visual Assets
 * All images must represent Synthex.social brand for SMB customers
 */

import { GoogleGenerativeAI } from '@google/generative-ai';
import { writeFileSync, mkdirSync } from 'fs';
import { join } from 'path';
import dotenv from 'dotenv';

dotenv.config({ path: '.env.local' });

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
const model = genAI.getGenerativeModel({ model: 'gemini-2.0-flash-exp' });

const outputDir = join(process.cwd(), 'public', 'synthex-assets');
mkdirSync(outputDir, { recursive: true });

console.log('üé® Generating Synthex.social Brand Assets...\n');

/**
 * Generate hero image - Synthex dashboard in action
 */
async function generateHeroImage() {
  console.log('Creating hero image (Synthex dashboard)...');

  const prompt = `Create a professional mockup/screenshot showing Synthex AI marketing dashboard:

CENTER PANEL: Content Generation Interface
- Header: "Synthex.social" logo with orange accent (#ff6b35)
- Large text area showing AI-generated social media post
- Text in area: "üî• New arrival: Premium bathroom fittings now in stock! Visit our Logan showroom this weekend."
- Below: "Generated by AI ‚Ä¢ Ready to publish"
- Orange "Publish Now" button

LEFT SIDEBAR: Navigation
- Dashboard icon (orange)
- Content (selected/highlighted)
- Calendar
- Analytics
- Contacts

RIGHT PANEL: Publishing Options
- Platform checkboxes: Facebook ‚úì, Instagram ‚úì, LinkedIn
- Schedule: "Post now" or calendar picker
- Preview thumbnails of generated images

BOTTOM: Quick Stats
- "3 posts scheduled today"
- "127 contacts engaged this week"
- Orange accent bars/highlights

Style: Clean, modern SaaS interface
Theme: Light/white background (SMB-friendly, not dark)
Accent: Orange #ff6b35 for buttons, highlights
Target: Small business owner (approachable, not technical)
Text rendering: Clear, readable, professional

This is for Synthex.social brand (AI marketing for small businesses).`;

  const result = await model.generateContent(prompt);
  let svgCode = result.response.text();
  svgCode = svgCode.replace(/```svg\n?/g, '').replace(/```\n?/g, '').trim();

  const filename = 'synthex-hero-dashboard.svg';
  writeFileSync(join(outputDir, filename), svgCode);

  console.log(`   ‚úÖ ${filename}\n`);
  return filename;
}

/**
 * Generate before/after transformation
 */
async function generateBeforeAfter() {
  console.log('Creating before/after transformation image...');

  const prompt = `Create split-screen before/after comparison for small business marketing:

LEFT SIDE (Before - Stress):
- Small business owner at messy desk
- Sticky notes everywhere with "Post to Facebook", "Reply to emails", "Update website"
- Clock showing late evening (9 PM)
- Laptop with 50+ browser tabs open
- Coffee cups, stress visible
- Muted colors (gray, beige)
- Text: "Before Synthex: Manual Marketing Chaos"

DIVIDER:
- Large orange arrow pointing right ‚Üí
- Text: "Transform"

RIGHT SIDE (After - Relief):
- Same business owner relaxed, smiling
- Clean desk, single laptop
- Synthex dashboard visible on screen showing:
  - "Content scheduled for next 14 days"
  - Orange checkmarks next to tasks
  - Calendar full of green (completed) items
- Clock showing reasonable time (3 PM)
- Text: "After Synthex: AI Handles Marketing"
- Subtitle: "From A$495/month"

Style: Professional illustration/photography hybrid
Emotion: Dramatic positive transformation
Colors: Left (muted stress), Right (vibrant with orange Synthex branding)
Target: Small business owners who are overwhelmed

Return SVG illustration.`;

  const result = await model.generateContent(prompt);
  let svgCode = result.response.text();
  svgCode = svgCode.replace(/```svg\n?/g, '').replace(/```\n?/g, '').trim();

  const filename = 'synthex-before-after-transformation.svg';
  writeFileSync(join(outputDir, filename), svgCode);

  console.log(`   ‚úÖ ${filename}\n`);
  return filename;
}

/**
 * Main execution
 */
async function main() {
  try {
    console.log('Starting Synthex brand asset generation...\n');

    await generateHeroImage();
    await generateBeforeAfter();

    console.log('‚ïê'.repeat(70));
    console.log('‚úÖ Synthex Brand Assets Generated\n');
    console.log('Output: public/synthex-assets/');
    console.log('   - synthex-hero-dashboard.svg');
    console.log('   - synthex-before-after-transformation.svg');
    console.log('\nNext: Use these in Synthex.social landing page');

  } catch (err) {
    console.error('‚ùå Generation failed:', err);
    process.exit(1);
  }
}

main();
